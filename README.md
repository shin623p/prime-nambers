# prime-numbers

エラトステネスの篩をいろんな言語で実装し、速度を計測する。

素直に、[エラトステネスの篩](https://ja.wikipedia.org/wiki/%E3%82%A8%E3%83%A9%E3%83%88%E3%82%B9%E3%83%86%E3%83%8D%E3%82%B9%E3%81%AE%E7%AF%A9) を使う。

### 処理概要

1. 標準入力から数値を一つ受け取る。(2 <= N <= 1,000,000,000)
2. N 以下の素数の一覧を作る。
3. N 以下の素数の数と最大の素数を出力して終了する。

### 入出力の例

- input

```
10000000
```

- output

```
664579 9999991
```

### 素数の数と最大値のサンプル

|             N |   素数の数 |  最大の素数 |
|--------------:|-----------:|------------:|
|            10 |          4 |           7 |
|           100 |         25 |          97 |
|         1,000 |        168 |         997 |
|        10,000 |      1,229 |       9,973 |
|       100,000 |      9,592 |      99,991 |
|     1,000,000 |     78,498 |     999,983 |
|    10,000,000 |    664,579 |   9,999,991 |
|   100,000,000 |  5,761,455 |  99,999,989 |
| 1,000,000,000 | 50,847,534 | 999,999,937 |


## 計測結果

### 環境

- MacBook Air (13-inch, Early 2015)
- CPU: 1.6 GHz Intel Core i5
- 8 GB 1600 MHz DDR3

### 結果

単位は秒。

| 言語        | 1,000 | 10,000 | 100,000 | 1,000,000 | 10,000,000 | 100,000,000 | 1,000,000,000 |
|:-----------:|------:|-------:|--------:|----------:|-----------:|------------:|--------------:|
| C           |  0.00 |   0.00 |    0.00 |      0.01 |       0.07 |        0.83 |          8.98 |
| Common Lisp |  0.01 |   0.02 |    0.01 |      0.02 |       0.07 |        0.76 |          8.34 |
| Go          |  0.02 |   0.01 |    0.00 |      0.01 |       0.11 |        1.11 |         11.46 |
| Java        |  0.18 |   0.18 |    0.21 |      0.20 |       0.28 |        2.26 |         40.62 |
| Nim         |  0.00 |   0.01 |    0.01 |      0.03 |       0.10 |        0.99 |         11.29 |
| Perl        |  0.01 |   0.02 |    0.05 |      0.39 |       4.08 |       50.84 |         --.-- |
| Python      |  0.05 |   0.05 |    0.09 |      0.43 |       3.97 |       47.71 |         --.-- |
| Ruby        |  0.09 |   0.10 |    0.11 |      0.38 |       3.63 |       43.38 |         --.-- |
| Rust        |  0.00 |   0.00 |    0.00 |      0.01 |       0.09 |        0.94 |         10.64 |


#### 特記事項

- C

  - `-O3` オプション付き

- Common Lisp

  - 処理系は SBCL を使い、 `ros build` で実行ファイルを作成。
  - `--disable-compression` オプション付き。
  - 型宣言付き。

- Go

  - 特になし

- Java

  - 極端に遅い (N=1000 でも 1 秒以上かかる) ときがある。
  - 1,000,000,000 はヒープが足りなかったため、ヒープサイズを 4096MB にして実行した。

- Nim

  - `-d:release` オプション

- Perl

  - 1.000.000.000 は結果が返ってこないので断念。

- Python

  - 1.000.000.000 は結果が返ってこないので断念。

- Ruby

  - 1.000.000.000 は結果が返ってこないので断念。

- Rust

  - `--release` オプション
